"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var n=t(e);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){if(Array.isArray(e))return e}function d(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,a=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){u=!0,l=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw l}}return a}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){return m(e)||d(e,t)||y(e,t)||h()}function E(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t){for(var n=[],l=0;l<t.length;l++){var a=t[l];if(a){var o=c(a);if("string"===o||"number"===o)n.push(a);else if("object"===o){var u=Array.isArray(a)?a:Object.entries(a).map((function(e){var t=v(e,2);return t[1]?t[0]:null}));n=u.length?n.concat(u.filter((function(e){return!!e}))):n}}}return n.join(" ")}}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var q=function(t){u(b,e.Component);var o,c,i,p,m,d=(o=b,c=j(),function(){var e,t=f(o);if(c){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function b(){return l(this,b),d.apply(this,arguments)}return i=b,(p=[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then((function(){return r(require("quill"))})).then((function(t){t&&t.default&&(e.quill=new t.default(e.editorElement,{modules:O({toolbar:e.toolbarElement},e.props.modules),placeholder:e.props.placeholder,readOnly:e.props.readOnly,theme:e.props.theme,formats:e.props.formats}),e.props.value&&e.quill.setContents(e.quill.clipboard.convert(e.props.value)),e.quill.on("text-change",(function(t,r){var n=e.editorElement.children[0].innerHTML,l=e.quill.getText();"<p><br></p>"===n&&(n=null),e.props.onTextChange&&e.props.onTextChange({htmlValue:n,textValue:l,delta:t,source:r})})),e.quill.on("selection-change",(function(t,r,n){e.props.onSelectionChange&&e.props.onSelectionChange({range:t,oldRange:r,source:n})})))}))}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.quill&&!this.quill.hasFocus()&&(this.props.value?this.quill.setContents(this.quill.clipboard.convert(this.props.value)):this.quill.setText(""))}},{key:"render",value:function(){var e=this,t=E("p-component p-editor-container",this.props.className);return n.default.createElement("div",{id:this.props.id,className:t},this.props.headerTemplate?n.default.createElement("div",{ref:function(t){return e.toolbarElement=t},className:"p-editor-toolbar"},this.props.headerTemplate):n.default.createElement("div",{ref:function(t){return e.toolbarElement=t},className:"p-editor-toolbar"},n.default.createElement("span",{className:"ql-formats"},n.default.createElement("select",{className:"ql-header",defaultValue:"0"},n.default.createElement("option",{value:"1"},"Heading"),n.default.createElement("option",{value:"2"},"Subheading"),n.default.createElement("option",{value:"0"},"Normal")),n.default.createElement("select",{className:"ql-font"},n.default.createElement("option",null),n.default.createElement("option",{value:"serif"}),n.default.createElement("option",{value:"monospace"}))),n.default.createElement("span",{className:"ql-formats"},n.default.createElement("button",{type:"button",className:"ql-bold","aria-label":"Bold"}),n.default.createElement("button",{type:"button",className:"ql-italic","aria-label":"Italic"}),n.default.createElement("button",{type:"button",className:"ql-underline","aria-label":"Underline"})),n.default.createElement("span",{className:"ql-formats"},n.default.createElement("select",{className:"ql-color"}),n.default.createElement("select",{className:"ql-background"})),n.default.createElement("span",{className:"ql-formats"},n.default.createElement("button",{type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"}),n.default.createElement("button",{type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"}),n.default.createElement("select",{className:"ql-align"},n.default.createElement("option",{defaultValue:!0}),n.default.createElement("option",{value:"center"}),n.default.createElement("option",{value:"right"}),n.default.createElement("option",{value:"justify"}))),n.default.createElement("span",{className:"ql-formats"},n.default.createElement("button",{type:"button",className:"ql-link","aria-label":"Insert Link"}),n.default.createElement("button",{type:"button",className:"ql-image","aria-label":"Insert Image"}),n.default.createElement("button",{type:"button",className:"ql-code-block","aria-label":"Insert Code Block"})),n.default.createElement("span",{className:"ql-formats"},n.default.createElement("button",{type:"button",className:"ql-clean","aria-label":"Remove Styles"}))),n.default.createElement("div",{ref:function(t){return e.editorElement=t},className:"p-editor-content",style:this.props.style}))}}])&&a(i.prototype,p),m&&a(i,m),b}();p(q,"defaultProps",{id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",headerTemplate:null,onTextChange:null,onSelectionChange:null}),exports.Editor=q;
